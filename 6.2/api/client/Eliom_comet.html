<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Module Eliom_comet </title><meta charset="utf8"/><link rel="stylesheet" href="/style.css"/><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.9.0/themes/prism.min.css"/><script src="/client.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.9.0/components/prism-core.min.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.9.0/components/prism-ocaml.min.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.9.0/components/prism-clike.min.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.9.0/components/prism-reason.min.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.9.0/components/prism-javascript.min.js"></script></head><body><div class="client-server-switch-wrapper"><div class="client-server-switch"><span class="client source">This is client API</span> API (go to <a class="server target" href="/eliom/6.2/api/server/Eliom_comet.html">server</a>)</div></div><button id="reason">Switch to </button><form id="search"><input name="q" id="q" placeholder="search ..."/><button>Search</button></form><h1>Module <span><a class="ocsforge_doclink_eliom" href="/eliom/6.2/api/client/Eliom_comet.html">Eliom_comet</a></span> </h1><pre class="ocsforge_color odocwiki_code"><span class="ocsforge_color_keyword">module</span> <span class="ocsforge_color_uid"><span class="ocsforge_color_uid">Eliom_comet</span></span> <span class="ocsforge_color_delimiter">:</span> <span class="ocsforge_color_keyword">sig</span><span><a class="ocsforge_doclink_eliom" href="/eliom/6.2/api/client/Eliom_comet.html">..</a></span><span class="ocsforge_color_keyword">end</span></pre><p>Handle unsolicited server to client communications.
</p><p>See the Eliom manual for a detailed introduction to the concept of
<span><a class="ocsforge_doclink_eliom" href="/eliom/6.2/manual/clientserver-communication.html">client server communication</a></span>.
</p><hr/><p>When the page is not active the client stops making comet requests
to the server, implying that the client can't be notified by the
server anymore. The activity status is changed when the page is
focused or unfocused.
</p><p>To stop receiving inputs from a channel, use Lwt.cancel on a
thread waiting for data. For instance, if you iterate with
<span class="odocwiki_inlinecode">let t = Lwt_stream.iter f %channel</span> calling <span class="odocwiki_inlinecode">Lwt.cancel t</span>
will close the channel.
</p><pre class="ocsforge_color odocwiki_code" id="EXCEPTIONChannel_full"><span class="ocsforge_color_keyword">exception</span> <span class="odocwiki_name">Channel_full</span></pre><div class="odocwiki_info"><p><span class="odocwiki_inlinecode">Channel_full</span> is raised when trying to read on a channel marked
full by the server. It is not possible to read anything else from a
full channel.</p></div><pre class="ocsforge_color odocwiki_code" id="EXCEPTIONChannel_closed"><span class="ocsforge_color_keyword">exception</span> <span class="odocwiki_name">Channel_closed</span></pre><div class="odocwiki_info"><p><span class="odocwiki_inlinecode">Channel_closed</span> is raised when reading on a channel and the
server side of the application closed channel ( the server was restarted,
a session was closed, or a stateless channel was garbage collected).</p></div><pre class="ocsforge_color odocwiki_code" id="VALis_active"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">is_active</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type">unit <span class="ocsforge_color_delimiter">-&gt;</span> [ `Active | `Idle | `Inactive ]</span></pre><div class="odocwiki_info"><p><span class="odocwiki_inlinecode">is_active ()</span> returns the current activity state</p></div><pre class="ocsforge_color odocwiki_code" id="VALactivate"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">activate</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type">unit <span class="ocsforge_color_delimiter">-&gt;</span> unit</span></pre><div class="odocwiki_info"><p>if the client is inactive <span class="odocwiki_inlinecode">activate ()</span> launch a new xhr
connection to start receiving server messages</p></div><pre class="ocsforge_color odocwiki_code" id="VALset_handle_exn_function"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">set_handle_exn_function</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type"><span class="ocsforge_color_delimiter">(</span><span class="ocsforge_color_label">?exn:</span>exn <span class="ocsforge_color_delimiter">-&gt;</span> unit <span class="ocsforge_color_delimiter">-&gt;</span> unit <span class="ocsforge_color_uid">Lwt</span><span class="ocsforge_color_delimiter">.</span><span class="ocsforge_color_lid">t</span><span class="ocsforge_color_delimiter">)</span> <span class="ocsforge_color_delimiter">-&gt;</span> unit</span></pre><div class="odocwiki_info"><p>Makes possible to customize the function called when comet fails
for unknown reason.
The usual practice is to warn the user and ask to reload the page.
This function is not called when a channel is full or closed.
It is called only once, for the first exception.</p></div><pre class="ocsforge_color odocwiki_code"><span class="ocsforge_color_keyword">module</span> <span><a class="ocsforge_doclink_eliom" href="/eliom/6.2/api/client/Eliom_comet.Configuration.html">Configuration</a></span> <span class="ocsforge_color_delimiter">:</span> <span class="ocsforge_color_keyword">sig</span><span><a class="ocsforge_doclink_eliom" href="/eliom/6.2/api/client/Eliom_comet.Configuration.html">..</a></span><span class="ocsforge_color_keyword">end</span></pre><div class="odocwiki_info"><p>Change the reactivity of channels.</p></div><pre class="ocsforge_color odocwiki_code"><span class="ocsforge_color_keyword">module</span> <span><a class="ocsforge_doclink_eliom" href="/eliom/6.2/api/client/Eliom_comet.Channel.html">Channel</a></span> <span class="ocsforge_color_delimiter">:</span> <span class="ocsforge_color_keyword">sig</span><span><a class="ocsforge_doclink_eliom" href="/eliom/6.2/api/client/Eliom_comet.Channel.html">..</a></span><span class="ocsforge_color_keyword">end</span></pre></body></html>
