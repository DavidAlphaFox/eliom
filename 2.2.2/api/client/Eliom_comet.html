<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Module Eliom_comet </title><meta charset="utf8"/><link rel="stylesheet" href="/home/balat/ocsigen/ocsigen.github.io/css/style.css"/><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.9.0/themes/prism.min.css"/><script src="/home/balat/ocsigen/html_of_wiki/client.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.9.0/components/prism-core.min.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.9.0/components/prism-ocaml.min.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.9.0/components/prism-clike.min.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.9.0/components/prism-reason.min.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.9.0/components/prism-javascript.min.js"></script></head><body><div class="project-page project-eliom"><div class="page-header"><p class="logo-ocsigen"><a href="/" class="ocsimore_phrasing_link"><img src="/img/ocsigen-white.svg" alt="Ocsigen"/></a>
</p><ul><li><a href="/" class="ocsimore_phrasing_link">Home</a>
</li><li class="mainmenu-current"><a href="/eliom/6.2/manual/intro" class="ocsimore_phrasing_link">Eliom</a>
</li><li><a href="/js_of_ocaml/2.8.4/manual/overview" class="ocsimore_phrasing_link">Js_of_ocaml</a>
</li><li><a href="/ocsigenserver/2.8/manual/quickstart" class="ocsimore_phrasing_link">Server</a>
</li><li><a href="/lwt/3.1.0/manual/manual" class="ocsimore_phrasing_link">Lwt</a>
</li><li><a href="/tyxml/4.1.0/manual/intro" class="ocsimore_phrasing_link">Tyxml</a>
</li><li><a href="/ocsigen-toolkit/1.0/manual/intro" class="ocsimore_phrasing_link">Toolkit</a>
</li><li><a href="/ocsigen-start/1.0/manual/intro" class="ocsimore_phrasing_link">Start</a>
</li><li><a href="/projects" class="ocsimore_phrasing_link">Other projects</a></li></ul></div><div class="version-selector"><p>Version
</p><div class="version-selector-versions"><p><span><a class="ocsforge_doclink_eliom" href="/eliom/6.2/manual/intro">6.2</a></span>
<span><a class="ocsforge_doclink_eliom" href="/eliom/6.1/manual/intro">6.1</a></span>
<span><a class="ocsforge_doclink_eliom" href="/eliom/6.0/manual/intro">6.0</a></span>
<span><a class="ocsforge_doclink_eliom" href="/eliom/5.0/manual/intro">5.0</a></span>
<span><a class="ocsforge_doclink_eliom" href="/eliom/4.2/manual/intro">4.2</a></span>
<span><a class="ocsforge_doclink_eliom" href="/eliom/4.1/manual/intro">4.1</a></span>
<span><a class="ocsforge_doclink_eliom" href="/eliom/4.0/manual/intro">4.0</a></span>
<span><a class="ocsforge_doclink_eliom" href="/eliom/3.0/manual/intro">3.0</a></span>
<span><a class="ocsforge_doclink_eliom" href="/eliom/2.2.2/manual/intro">2.2.2</a></span>
<span><a class="ocsforge_doclink_eliom" href="/eliom/2.1.1/manual/intro">2.1.1</a></span>
<span><a class="ocsforge_doclink_eliom" href="/eliom/2.0.2/manual/intro">2.0.2</a></span>
<span><a class="ocsforge_doclink_eliom" href="/eliom/2.0.1/manual/intro">2.0.1</a></span>
<span><a class="ocsforge_doclink_eliom" href="/eliom/2.0/manual/intro">2.0</a></span>
<span><a class="ocsforge_doclink_eliom" href="/eliom/1.3.4/manual/intro">1.3.4</a></span>
<span><a class="ocsforge_doclink_eliom" href="/eliom/1.2.2/manual/intro">1.2.2</a></span>
<span><a class="ocsforge_doclink_eliom" href="/eliom/1.1.0/manual/intro">1.1.0</a></span>
<span><a class="ocsforge_doclink_eliom" href="/eliom/dev/manual/intro">dev</a></span></p></div></div><div class="client-server-switch-wrapper"><div class="client-server-switch"><span class="client source">This is client API</span> API (go to <a class="server target" href="/eliom/2.2.2/api/server/Eliom_comet">server</a>)</div></div><button id="reason">Switch to </button><form id="search"><input name="q" id="q" placeholder="search ..."/><button>Search</button></form><h1>Module <span><a class="ocsforge_doclink_eliom" href="/eliom/2.2.2/api/client/Eliom_comet">Eliom_comet</a></span> </h1><pre class="ocsforge_color odocwiki_code"><span class="ocsforge_color_keyword">module</span> <span class="ocsforge_color_uid"><span class="ocsforge_color_uid">Eliom_comet</span></span> <span class="ocsforge_color_delimiter">:</span> <span class="ocsforge_color_keyword">sig</span><span><a class="ocsforge_doclink_eliom" href="/eliom/2.2.2/api/client/Eliom_comet">..</a></span><span class="ocsforge_color_keyword">end</span></pre><p>Handle unsolicited server to client communications.
</p><p>See the Eliom manual for a detailed introduction to the concept of
<span><a class="ocsforge_doclink_eliom" href="/eliom/2.2.2/manual/client-communication">client server communication</a></span>.
</p><hr/><p>When the page is not active the client stops making comet requests
to the server, implying that the client can't be notified by the
server anymore. The activity status is changed when the page is
focused or unfocused.
</p><p>To stop receiving inputs from a channel, use Lwt.cancel on a
thread waiting for datas. For instance, if you iterate with
<span class="odocwiki_inlinecode">let t = Lwt_stream.iter f %channel</span> calling <span class="odocwiki_inlinecode">Lwt.cancel t</span>
will close the channel.
</p><pre class="ocsforge_color odocwiki_code" id="EXCEPTIONChannel_full"><span class="ocsforge_color_keyword">exception</span> <span class="odocwiki_name">Channel_full</span></pre><div class="odocwiki_info"><p><span class="odocwiki_inlinecode">Channel_full</span> is raised when trying to read on a channel marked
full by the server. It is not possible to read anything else from a
full channel.</p></div><pre class="ocsforge_color odocwiki_code" id="EXCEPTIONProcess_closed"><span class="ocsforge_color_keyword">exception</span> <span class="odocwiki_name">Process_closed</span></pre><div class="odocwiki_info"><p><span class="odocwiki_inlinecode">Process_closed</span> is raised when reading on a channel and the
server side of the application closed the client process.
This apply only to stateful channels</p></div><pre class="ocsforge_color odocwiki_code" id="EXCEPTIONChannel_closed"><span class="ocsforge_color_keyword">exception</span> <span class="odocwiki_name">Channel_closed</span></pre><div class="odocwiki_info"><p><span class="odocwiki_inlinecode">Process_closed</span> is raised when reading on a channel and the
server side of the application closed channel ( the channel
was garbage collected ). This apply only to stateless channels</p></div><pre class="ocsforge_color odocwiki_code" id="VALis_active"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">is_active</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type">unit <span class="ocsforge_color_delimiter">-&gt;</span> bool</span></pre><div class="odocwiki_info"><p><span class="odocwiki_inlinecode">is_active ()</span> returns the current activity state</p></div><pre class="ocsforge_color odocwiki_code" id="VALactivate"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">activate</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type">unit <span class="ocsforge_color_delimiter">-&gt;</span> unit</span></pre><div class="odocwiki_info"><p>if the client is inactive <span class="odocwiki_inlinecode">activate ()</span> launch a new xhr
connection to start receiving server messages</p></div><pre class="ocsforge_color odocwiki_code"><span class="ocsforge_color_keyword">module</span> <span><a class="ocsforge_doclink_eliom" href="/eliom/2.2.2/api/client/Eliom_comet.Configuration">Configuration</a></span> <span class="ocsforge_color_delimiter">:</span> <span class="ocsforge_color_keyword">sig</span><span><a class="ocsforge_doclink_eliom" href="/eliom/2.2.2/api/client/Eliom_comet.Configuration">..</a></span><span class="ocsforge_color_keyword">end</span></pre><div class="odocwiki_info"><p>Change the reactivity of channels.</p></div><pre class="ocsforge_color odocwiki_code"><span class="ocsforge_color_keyword">module</span> <span><a class="ocsforge_doclink_eliom" href="/eliom/2.2.2/api/client/Eliom_comet.Channel">Channel</a></span> <span class="ocsforge_color_delimiter">:</span> <span class="ocsforge_color_keyword">sig</span><span><a class="ocsforge_doclink_eliom" href="/eliom/2.2.2/api/client/Eliom_comet.Channel">..</a></span><span class="ocsforge_color_keyword">end</span></pre></div></body></html>
